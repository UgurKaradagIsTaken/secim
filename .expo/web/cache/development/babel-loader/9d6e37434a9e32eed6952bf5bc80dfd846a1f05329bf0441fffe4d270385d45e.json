{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/yavuzceliker/Desktop/projects/yavuz/react/qr4car/mobile/app/components/alert-renderer/alertRenderer.js\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport memoize from \"fast-memoize\";\nimport React, { useCallback, useState } from \"react\";\nimport { CommandTypeEnum } from \"../../infrastructure/command-bus/command-type-enum\";\nimport useCommandBusListener from \"../../infrastructure/command-bus/hooks/use-command-bus-listener\";\nimport Toast from '../../components/snackbar/snackbar';\nimport general from \"../../utils/general\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar AlertRenderer = function AlertRenderer() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    alerts = _useState2[0],\n    setAlerts = _useState2[1];\n  var onReceivedAlertCommand = useCallback(function (payload) {\n    setAlerts(function (x) {\n      return [].concat(_toConsumableArray(alerts), [{\n        key: general.generateRandomString(20),\n        type: payload.type,\n        message: payload == null ? void 0 : payload.message,\n        visible: true\n      }]);\n    });\n  }, []);\n  useCommandBusListener(CommandTypeEnum.Alert, onReceivedAlertCommand);\n  var onDismiss = useCallback(function (key) {\n    setAlerts(function (x) {\n      return _toConsumableArray(x.map(function (z) {\n        return _objectSpread(_objectSpread({}, z), key == (z == null ? void 0 : z.key) ? {\n          visible: false\n        } : {});\n      }));\n    });\n    setTimeout(function () {\n      setAlerts(function (x) {\n        return _toConsumableArray(x.filter(function (z) {\n          return z.key != key;\n        }));\n      });\n    }, 1400);\n  }, []);\n  var onDismissDynamic = React.useMemo(function () {\n    return memoize(function (key) {\n      return function () {\n        return onDismiss(key);\n      };\n    });\n  }, []);\n  return _jsxDEV(_Fragment, {\n    children: alerts.map(function (item) {\n      return _jsxDEV(Toast, {\n        visible: item == null ? void 0 : item.visible,\n        duration: 2200,\n        onDismiss: onDismissDynamic(item == null ? void 0 : item.key),\n        type: item == null ? void 0 : item.type,\n        children: item.message\n      }, item == null ? void 0 : item.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, _this);\n    })\n  }, void 0, false);\n};\nexport default React.memo(AlertRenderer, function () {\n  return true;\n});","map":{"version":3,"names":["memoize","React","useCallback","useState","CommandTypeEnum","useCommandBusListener","Toast","general","jsxDEV","_jsxDEV","Fragment","_Fragment","AlertRenderer","_useState","_useState2","_slicedToArray","alerts","setAlerts","onReceivedAlertCommand","payload","x","concat","_toConsumableArray","key","generateRandomString","type","message","visible","Alert","onDismiss","map","z","_objectSpread","setTimeout","filter","onDismissDynamic","useMemo","children","item","duration","fileName","_jsxFileName","lineNumber","columnNumber","_this","memo"],"sources":["/Users/yavuzceliker/Desktop/projects/yavuz/react/qr4car/mobile/app/components/alert-renderer/alertRenderer.js"],"sourcesContent":["import memoize from \"fast-memoize\";\nimport React, { useCallback, useState } from \"react\";\nimport { CommandTypeEnum } from \"../../infrastructure/command-bus/command-type-enum\";\nimport useCommandBusListener from \"../../infrastructure/command-bus/hooks/use-command-bus-listener\";\n\nimport Toast from '../../components/snackbar/snackbar'\nimport general from \"../../utils/general\";\nconst AlertRenderer = () => {\n    const [alerts, setAlerts] = useState([]);\n    const onReceivedAlertCommand = useCallback((payload) => {\n        setAlerts(x => ([...alerts, {\n            key: general.generateRandomString(20),\n            type: payload.type,\n            message: payload?.message,\n            visible: true\n        }]));\n    }, []);\n\n    useCommandBusListener(CommandTypeEnum.Alert, onReceivedAlertCommand)\n\n    const onDismiss = useCallback((key) => {\n        setAlerts(x => ([...(\n            x.map(z => ({ ...z, ...(key == z?.key ? { visible: false } : {}) }))\n        )]));\n        setTimeout(() => {\n            setAlerts(x => ([...(x.filter(z => z.key != key))]));\n        }, 1400);\n    }, []);\n    const onDismissDynamic = React.useMemo(\n        () =>\n            memoize((key) => () => onDismiss(key)),\n        []\n    );\n    return (\n        <>\n            {alerts.map(item => (\n                <Toast key={item?.key} visible={item?.visible} duration={2200} onDismiss={onDismissDynamic(item?.key)} type={item?.type}>{item.message}</Toast>\n            ))}\n        </>\n    );\n}\nexport default React.memo(AlertRenderer, () => true); "],"mappings":";;;;;;;AAAA,OAAOA,OAAO,MAAM,cAAc;AAClC,OAAOC,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,eAAe,QAAQ,oDAAoD;AACpF,OAAOC,qBAAqB,MAAM,iEAAiE;AAEnG,OAAOC,KAAK,MAAM,oCAAoC;AACtD,OAAOC,OAAO,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAC1C,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;EACxB,IAAAC,SAAA,GAA4BV,QAAQ,CAAC,EAAE,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjCG,MAAM,GAAAF,UAAA;IAAEG,SAAS,GAAAH,UAAA;EACxB,IAAMI,sBAAsB,GAAGhB,WAAW,CAAC,UAACiB,OAAO,EAAK;IACpDF,SAAS,CAAC,UAAAG,CAAC;MAAA,UAAAC,MAAA,CAAAC,kBAAA,CAASN,MAAM,IAAE;QACxBO,GAAG,EAAEhB,OAAO,CAACiB,oBAAoB,CAAC,EAAE,CAAC;QACrCC,IAAI,EAAEN,OAAO,CAACM,IAAI;QAClBC,OAAO,EAAEP,OAAO,oBAAPA,OAAO,CAAEO,OAAO;QACzBC,OAAO,EAAE;MACb,CAAC;IAAA,CAAE,CAAC;EACR,CAAC,EAAE,EAAE,CAAC;EAENtB,qBAAqB,CAACD,eAAe,CAACwB,KAAK,EAAEV,sBAAsB,CAAC;EAEpE,IAAMW,SAAS,GAAG3B,WAAW,CAAC,UAACqB,GAAG,EAAK;IACnCN,SAAS,CAAC,UAAAG,CAAC;MAAA,OAAAE,kBAAA,CACPF,CAAC,CAACU,GAAG,CAAC,UAAAC,CAAC;QAAA,OAAAC,aAAA,CAAAA,aAAA,KAAUD,CAAC,GAAMR,GAAG,KAAIQ,CAAC,oBAADA,CAAC,CAAER,GAAG,IAAG;UAAEI,OAAO,EAAE;QAAM,CAAC,GAAG,CAAC,CAAC;MAAA,CAAI,CAAC;IAAA,CACrE,CAAC;IACJM,UAAU,CAAC,YAAM;MACbhB,SAAS,CAAC,UAAAG,CAAC;QAAA,OAAAE,kBAAA,CAAUF,CAAC,CAACc,MAAM,CAAC,UAAAH,CAAC;UAAA,OAAIA,CAAC,CAACR,GAAG,IAAIA,GAAG;QAAA,EAAC;MAAA,CAAG,CAAC;IACxD,CAAC,EAAE,IAAI,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;EACN,IAAMY,gBAAgB,GAAGlC,KAAK,CAACmC,OAAO,CAClC;IAAA,OACIpC,OAAO,CAAC,UAACuB,GAAG;MAAA,OAAK;QAAA,OAAMM,SAAS,CAACN,GAAG,CAAC;MAAA;IAAA,EAAC;EAAA,GAC1C,EACJ,CAAC;EACD,OACId,OAAA,CAAAE,SAAA;IAAA0B,QAAA,EACKrB,MAAM,CAACc,GAAG,CAAC,UAAAQ,IAAI;MAAA,OACZ7B,OAAA,CAACH,KAAK;QAAiBqB,OAAO,EAAEW,IAAI,oBAAJA,IAAI,CAAEX,OAAQ;QAACY,QAAQ,EAAE,IAAK;QAACV,SAAS,EAAEM,gBAAgB,CAACG,IAAI,oBAAJA,IAAI,CAAEf,GAAG,CAAE;QAACE,IAAI,EAAEa,IAAI,oBAAJA,IAAI,CAAEb,IAAK;QAAAY,QAAA,EAAEC,IAAI,CAACZ;MAAO,GAA1HY,IAAI,oBAAJA,IAAI,CAAEf,GAAG;QAAAiB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,GAAAC,KAAyH,CAAC;IAAA,CAClJ;EAAC,gBACJ,CAAC;AAEX,CAAC;AACD,eAAe3C,KAAK,CAAC4C,IAAI,CAACjC,aAAa,EAAE;EAAA,OAAM,IAAI;AAAA,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}