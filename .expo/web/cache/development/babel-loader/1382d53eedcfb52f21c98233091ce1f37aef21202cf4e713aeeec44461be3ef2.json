{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { getName, updateName } from \"../api/api\";\nexport var getNameQuery = function getNameQuery() {\n  return {\n    queryKey: [\"name\"],\n    queryFn: getName\n  };\n};\nexport var useUserInfo = function useUserInfo() {\n  var qc = useQueryClient();\n  return useMutation(function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var userInfo = _ref.userInfo;\n      yield updateName(newName);\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), {\n    onMutate: function () {\n      var _onMutate = _asyncToGenerator(function* (_ref3) {\n        var newName = _ref3.newName;\n        yield qc.cancelQueries(\"name\");\n        var currentName = qc.getQueryData(\"name\");\n        qc.setQueryData(\"name\", newName);\n        return currentName;\n      });\n      function onMutate(_x2) {\n        return _onMutate.apply(this, arguments);\n      }\n      return onMutate;\n    }(),\n    onError: function onError(_error, _variables, context) {\n      if (context) qc.setQueryData(\"name\", context);\n    },\n    onSettled: function () {\n      var _onSettled = _asyncToGenerator(function* () {\n        qc.invalidateQueries(\"name\");\n      });\n      function onSettled() {\n        return _onSettled.apply(this, arguments);\n      }\n      return onSettled;\n    }()\n  });\n};\nexport function useObserveQuery(queryKey) {\n  return useQuery(queryKey, {\n    enabled: false\n  });\n}","map":{"version":3,"names":["useMutation","useQuery","useQueryClient","getName","updateName","getNameQuery","queryKey","queryFn","useUserInfo","qc","_ref2","_asyncToGenerator","_ref","userInfo","newName","_x","apply","arguments","onMutate","_onMutate","_ref3","cancelQueries","currentName","getQueryData","setQueryData","_x2","onError","_error","_variables","context","onSettled","_onSettled","invalidateQueries","useObserveQuery","enabled"],"sources":["/Users/yavuzceliker/Desktop/projects/yavuz/react/qr4car/mobile/app/utils/hooks/use-userinfo.ts"],"sourcesContent":["import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { getName, updateName } from \"../api/api\";\n\nexport const getNameQuery = () => ({\n    queryKey: [\"name\"],\n    queryFn: getName,\n});\n\nexport const useUserInfo = () => {\n    const qc = useQueryClient();\n    return useMutation<void, unknown, { newName: string }, string>(\n        async ({ userInfo }) => {\n            await updateName(newName);\n        },\n        {\n            onMutate: async ({ newName }) => {\n                await qc.cancelQueries(\"name\");\n\n                const currentName: string | undefined = qc.getQueryData(\"name\");\n                qc.setQueryData(\"name\", newName);\n\n                return currentName;\n            },\n            onError: (_error, _variables, context) => {\n                if (context) qc.setQueryData(\"name\", context);\n            },\n            onSettled: async () => {\n                qc.invalidateQueries(\"name\");\n            },\n        }\n    );\n};\n\nexport function useObserveQuery<TData = unknown>(queryKey: string[]) {\n    return useQuery<TData>(queryKey, { enabled: false });\n}\n"],"mappings":";AAAA,SAASA,WAAW,EAAEC,QAAQ,EAAEC,cAAc,QAAQ,aAAa;AACnE,SAASC,OAAO,EAAEC,UAAU,QAAQ,YAAY;AAEhD,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA;EAAA,OAAU;IAC/BC,QAAQ,EAAE,CAAC,MAAM,CAAC;IAClBC,OAAO,EAAEJ;EACb,CAAC;AAAA,CAAC;AAEF,OAAO,IAAMK,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EAC7B,IAAMC,EAAE,GAAGP,cAAc,CAAC,CAAC;EAC3B,OAAOF,WAAW;IAAA,IAAAU,KAAA,GAAAC,iBAAA,CACd,WAAAC,IAAA,EAAwB;MAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;MACb,MAAMT,UAAU,CAACU,OAAO,CAAC;IAC7B,CAAC;IAAA,iBAAAC,EAAA;MAAA,OAAAL,KAAA,CAAAM,KAAA,OAAAC,SAAA;IAAA;EAAA,KACD;IACIC,QAAQ;MAAA,IAAAC,SAAA,GAAAR,iBAAA,CAAE,WAAAS,KAAA,EAAuB;QAAA,IAAdN,OAAO,GAAAM,KAAA,CAAPN,OAAO;QACtB,MAAML,EAAE,CAACY,aAAa,CAAC,MAAM,CAAC;QAE9B,IAAMC,WAA+B,GAAGb,EAAE,CAACc,YAAY,CAAC,MAAM,CAAC;QAC/Dd,EAAE,CAACe,YAAY,CAAC,MAAM,EAAEV,OAAO,CAAC;QAEhC,OAAOQ,WAAW;MACtB,CAAC;MAAA,SAAAJ,SAAAO,GAAA;QAAA,OAAAN,SAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAC,QAAA;IAAA;IACDQ,OAAO,EAAE,SAAAA,QAACC,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAK;MACtC,IAAIA,OAAO,EAAEpB,EAAE,CAACe,YAAY,CAAC,MAAM,EAAEK,OAAO,CAAC;IACjD,CAAC;IACDC,SAAS;MAAA,IAAAC,UAAA,GAAApB,iBAAA,CAAE,aAAY;QACnBF,EAAE,CAACuB,iBAAiB,CAAC,MAAM,CAAC;MAChC,CAAC;MAAA,SAAAF,UAAA;QAAA,OAAAC,UAAA,CAAAf,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAa,SAAA;IAAA;EACL,CACJ,CAAC;AACL,CAAC;AAED,OAAO,SAASG,eAAeA,CAAkB3B,QAAkB,EAAE;EACjE,OAAOL,QAAQ,CAAQK,QAAQ,EAAE;IAAE4B,OAAO,EAAE;EAAM,CAAC,CAAC;AACxD"},"metadata":{},"sourceType":"module","externalDependencies":[]}